<mxfile host="drawio-plugin" modified="2022-02-10T06:45:12.770Z" agent="5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.114 Safari/537.36" etag="thwCr10_5fiJIgwvL5RB" version="15.5.4" type="embed"><diagram id="23iRSUPoRavnBvh4doch" name="Page-1"><mxGraphModel dx="740" dy="1054" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0"><root><mxCell id="0"/><mxCell id="1" parent="0"/><mxCell id="49" value="Sicherer Kontext (nicht Browser)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;verticalAlign=bottom;align=right;" parent="1" vertex="1"><mxGeometry x="220" y="460" width="420" height="230" as="geometry"/></mxCell><mxCell id="5" value="Vereinfachung: Wir gehen davon aus das nur ein OX mit einer Nextcloud spricht" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1"><mxGeometry x="30" y="30" width="490" height="30" as="geometry"/></mxCell><mxCell id="16" value="" style="shape=umlLifeline;participant=umlActor;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;outlineConnect=0;" parent="1" vertex="1"><mxGeometry x="70" y="130" width="20" height="550" as="geometry"/></mxCell><mxCell id="17" value="OX" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1"><mxGeometry x="190" y="110" width="100" height="560" as="geometry"/></mxCell><mxCell id="38" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="17" vertex="1"><mxGeometry x="50" y="370" width="10" height="190" as="geometry"/></mxCell><mxCell id="18" value="Nextcloud Facade" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1"><mxGeometry x="350" y="110" width="100" height="570" as="geometry"/></mxCell><mxCell id="45" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="18" vertex="1"><mxGeometry x="45" y="475" width="10" height="80" as="geometry"/></mxCell><mxCell id="19" value="Keycloak" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1"><mxGeometry x="560" y="110" width="100" height="560" as="geometry"/></mxCell><mxCell id="22" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="19" vertex="1"><mxGeometry x="45" y="90" width="10" height="30" as="geometry"/></mxCell><mxCell id="23" value="login" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;rounded=0;" parent="19" target="22" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-336.2068965517241" y="90" as="sourcePoint"/></mxGeometry></mxCell><mxCell id="26" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="19" vertex="1"><mxGeometry x="45" y="160" width="10" height="40" as="geometry"/></mxCell><mxCell id="33" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="19" vertex="1"><mxGeometry x="45" y="260" width="10" height="80" as="geometry"/></mxCell><mxCell id="35" value="return" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;rounded=0;" parent="19" source="33" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-480" y="340" as="targetPoint"/><Array as="points"><mxPoint x="-220" y="340"/></Array></mxGeometry></mxCell><mxCell id="41" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="19" vertex="1"><mxGeometry x="45" y="395" width="10" height="45" as="geometry"/></mxCell><mxCell id="20" value="Mails" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;" parent="1" source="16" target="17" edge="1"><mxGeometry width="80" relative="1" as="geometry"><mxPoint x="110" y="210" as="sourcePoint"/><mxPoint x="190" y="210" as="targetPoint"/><Array as="points"><mxPoint x="110" y="200"/></Array></mxGeometry></mxCell><mxCell id="24" value="session usw" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;rounded=0;" parent="1" source="22" target="17" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="540" y="256" as="targetPoint"/><Array as="points"><mxPoint x="380" y="229"/></Array></mxGeometry></mxCell><mxCell id="25" value="Filelist" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;" parent="1" source="16" target="18" edge="1"><mxGeometry x="-0.2554" y="10" width="80" relative="1" as="geometry"><mxPoint x="280" y="300" as="sourcePoint"/><mxPoint x="360" y="300" as="targetPoint"/><Array as="points"><mxPoint x="370" y="270"/></Array><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="27" value="auth" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;rounded=0;" parent="1" source="18" target="26" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="535" y="270" as="sourcePoint"/><Array as="points"><mxPoint x="470" y="270"/></Array></mxGeometry></mxCell><mxCell id="28" value="return" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;rounded=0;" parent="1" source="26" target="18" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="535" y="346" as="targetPoint"/><Array as="points"><mxPoint x="500" y="308"/><mxPoint x="490" y="308"/></Array></mxGeometry></mxCell><mxCell id="30" value="Filelist" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;" parent="1" source="18" target="16" edge="1"><mxGeometry x="-0.0875" y="-10" width="80" relative="1" as="geometry"><mxPoint x="300" y="320" as="sourcePoint"/><mxPoint x="80" y="300" as="targetPoint"/><Array as="points"><mxPoint x="370" y="300"/><mxPoint x="350" y="300"/><mxPoint x="260" y="300"/><mxPoint x="200" y="300"/></Array><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="34" value="" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;rounded=0;" parent="1" source="16" target="33" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="535" y="370" as="sourcePoint"/></mxGeometry></mxCell><mxCell id="36" value="Auth Code Anfrage mit redirect auf attach_file(code)" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="34" vertex="1" connectable="0"><mxGeometry x="-0.8642" y="2" relative="1" as="geometry"><mxPoint x="135" y="2" as="offset"/></mxGeometry></mxCell><mxCell id="39" value="attach_file(code)" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;rounded=0;" parent="1" source="16" target="38" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="170" y="480" as="sourcePoint"/></mxGeometry></mxCell><mxCell id="40" value="success Message" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;rounded=0;" parent="1" source="38" target="16" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="170" y="556" as="targetPoint"/></mxGeometry></mxCell><mxCell id="42" value="code" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;rounded=0;" parent="1" target="41" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="250" y="505" as="sourcePoint"/></mxGeometry></mxCell><mxCell id="43" value="access token" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;rounded=0;entryX=1.117;entryY=0.351;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="41" target="38" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="530" y="566" as="targetPoint"/></mxGeometry></mxCell><mxCell id="46" value="get_file(access_token)" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;rounded=0;" parent="1" source="38" target="45" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="310" y="585" as="sourcePoint"/></mxGeometry></mxCell><mxCell id="47" value="file" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;rounded=0;" parent="1" source="45" target="38" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="310" y="661" as="targetPoint"/></mxGeometry></mxCell><mxCell id="48" value="&lt;h1&gt;Vorteile&lt;/h1&gt;&lt;p&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Wenig Traffic für den Browser&lt;/li&gt;&lt;li&gt;Der Browser / das OX Frontend bekommt keinen Zugriff auf Dateien&lt;/li&gt;&lt;li&gt;(Der Authorization Code ist an den Confidential Client gebunden, nur OX kann ihn einlösen)&lt;/li&gt;&lt;li&gt;Das Vertrauen in OX beschränkt sich darauf das wir es implizit den Consent des Users einsammeln lassen&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1"><mxGeometry x="680" y="190" width="350" height="160" as="geometry"/></mxCell></root></mxGraphModel></diagram></mxfile>