<mxfile host="drawio-plugin" modified="2022-02-24T13:44:24.337Z" agent="5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.114 Safari/537.36" etag="dFkDDCjCEZLsSo2oxXmp" version="15.5.4" type="embed"><diagram id="23iRSUPoRavnBvh4doch" name="Page-1"><mxGraphModel dx="1549" dy="1327" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0"><root><mxCell id="0"/><mxCell id="1" parent="0"/><mxCell id="41" value="&lt;b style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;Backend&lt;/font&gt;&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=13;align=center;verticalAlign=top;fillColor=#f9f7ed;strokeColor=#36393d;arcSize=14;" parent="1" vertex="1"><mxGeometry x="880" y="70" width="510" height="830" as="geometry"/></mxCell><mxCell id="40" value="&lt;font size=&quot;1&quot;&gt;&lt;b style=&quot;font-size: 20px&quot;&gt;Browsertab http://oxfake.p.test&lt;/b&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=center;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;verticalAlign=top;" parent="1" vertex="1"><mxGeometry y="70" width="830" height="810" as="geometry"/></mxCell><mxCell id="28" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="80" y="250" as="sourcePoint"/><mxPoint x="312" y="250" as="targetPoint"/><Array as="points"><mxPoint x="250.5" y="250"/></Array></mxGeometry></mxCell><mxCell id="29" value="Loads IFrame&lt;br style=&quot;font-size: 16px;&quot;&gt;(sandbox allow-same-origin allow-scripts" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=16;" parent="28" vertex="1" connectable="0"><mxGeometry x="-0.041" y="-4" relative="1" as="geometry"><mxPoint x="279" y="-14" as="offset"/></mxGeometry></mxCell><mxCell id="2" value="oxfake.p.test" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fontSize=16;fontStyle=1" parent="1" vertex="1"><mxGeometry x="30" y="120" width="100" height="720" as="geometry"/></mxCell><mxCell id="10" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=21;" parent="1" target="5" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="460.5" y="270"/></Array><mxPoint x="312" y="270" as="sourcePoint"/><mxPoint x="600" y="270" as="targetPoint"/></mxGeometry></mxCell><mxCell id="31" value="parent.postMessage('start')" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=13;" parent="1" edge="1"><mxGeometry x="-0.1036" y="-10" relative="1" as="geometry"><mxPoint x="312" y="680" as="sourcePoint"/><mxPoint x="80" y="680" as="targetPoint"/><Array as="points"><mxPoint x="160.5" y="680"/></Array><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="3" value="IFrame: Portal" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fontSize=16;fontStyle=1" parent="1" vertex="1"><mxGeometry x="209.5" y="120" width="204" height="560" as="geometry"/></mxCell><mxCell id="11" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=21;" parent="1" source="5" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="600" y="300" as="sourcePoint"/><mxPoint x="312" y="300" as="targetPoint"/><Array as="points"><mxPoint x="430.5" y="300"/></Array></mxGeometry></mxCell><mxCell id="15" value="302" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="11" vertex="1" connectable="0"><mxGeometry x="0.4436" y="-4" relative="1" as="geometry"><mxPoint y="-6" as="offset"/></mxGeometry></mxCell><mxCell id="35" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="5" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="600.33" y="750" as="sourcePoint"/><mxPoint x="80" y="747.7719796430151" as="targetPoint"/><Array as="points"><mxPoint x="410.83" y="750"/><mxPoint x="200.83" y="750"/></Array></mxGeometry></mxCell><mxCell id="5" value="portal.p.test" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;size=40;fontSize=16;fontStyle=1" parent="1" vertex="1"><mxGeometry x="940.25" y="120" width="120" height="740" as="geometry"/></mxCell><mxCell id="20" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" target="6" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="312" y="420" as="sourcePoint"/><mxPoint x="760" y="420" as="targetPoint"/><Array as="points"><mxPoint x="320.5" y="420"/></Array></mxGeometry></mxCell><mxCell id="6" value="Keycloak" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fontSize=16;fontStyle=1" parent="1" vertex="1"><mxGeometry x="1099.75" y="120" width="100" height="510" as="geometry"/></mxCell><mxCell id="12" value="&lt;div style=&quot;font-size: 15px&quot;&gt;&lt;font style=&quot;font-size: 15px&quot;&gt;Access-Control-Allow-Credentials: true&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 15px&quot;&gt;&lt;font style=&quot;font-size: 15px&quot;&gt;Access-Control-Allow-Headers: Content-Type&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 15px&quot;&gt;&lt;font style=&quot;font-size: 15px&quot;&gt;Access-Control-Allow-Methods: GET&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 15px&quot;&gt;&lt;font style=&quot;font-size: 15px&quot;&gt;Access-Control-Allow-Origin: http://oxfake.p.test&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 15px&quot;&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" parent="1" vertex="1"><mxGeometry x="320.5" y="330" width="350" height="40" as="geometry"/></mxCell><mxCell id="13" value="SRC http://portal.p.test/silent_login" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=16;" parent="1" vertex="1"><mxGeometry x="660" y="240" width="260" height="20" as="geometry"/></mxCell><mxCell id="16" value="" style="endArrow=classic;html=1;rounded=0;" parent="1" source="6" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="760" y="490" as="sourcePoint"/><mxPoint x="312" y="490" as="targetPoint"/><Array as="points"><mxPoint x="540.5" y="490"/><mxPoint x="330.5" y="490"/></Array></mxGeometry></mxCell><mxCell id="21" value="302 incl authorization code" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=16;" parent="16" vertex="1" connectable="0"><mxGeometry x="0.6217" y="-3" relative="1" as="geometry"><mxPoint x="48" y="3" as="offset"/></mxGeometry></mxCell><mxCell id="18" value="Cookie: KEYCLOAK_SESSION..." style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=16;" parent="1" vertex="1"><mxGeometry x="315.5" y="420" width="260" height="20" as="geometry"/></mxCell><mxCell id="22" value="" style="endArrow=classic;html=1;rounded=0;" parent="1" target="5" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="312" y="540" as="sourcePoint"/><mxPoint x="600" y="540" as="targetPoint"/><Array as="points"><mxPoint x="530.5" y="540"/></Array></mxGeometry></mxCell><mxCell id="23" value="Authorization Code" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=16;" parent="22" vertex="1" connectable="0"><mxGeometry x="-0.278" y="-1" relative="1" as="geometry"><mxPoint x="1" as="offset"/></mxGeometry></mxCell><mxCell id="25" value="&lt;font style=&quot;font-size: 15px&quot;&gt;Exchange Code for Token&lt;/font&gt;" style="endArrow=classic;startArrow=classic;html=1;rounded=0;" parent="1" edge="1"><mxGeometry x="0.2531" y="20" width="50" height="50" relative="1" as="geometry"><mxPoint x="989.75" y="600" as="sourcePoint"/><mxPoint x="1149.75" y="600" as="targetPoint"/><Array as="points"><mxPoint x="1030.25" y="600"/><mxPoint x="1100" y="600"/></Array><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="27" value="200 (finally)" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="5" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="600" y="630" as="sourcePoint"/><mxPoint x="312" y="630" as="targetPoint"/><Array as="points"><mxPoint x="350.5" y="630"/></Array></mxGeometry></mxCell><mxCell id="30" value="&lt;font style=&quot;font-size: 17px&quot;&gt;Set-Cookie: portal_session, ...&lt;br&gt;&lt;br&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;" parent="1" vertex="1"><mxGeometry x="360" y="600" width="470" height="30" as="geometry"/></mxCell><mxCell id="33" value="" style="endArrow=classic;html=1;rounded=0;" parent="1" target="5" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="80.49666666666651" y="720" as="sourcePoint"/><mxPoint x="600.83" y="720" as="targetPoint"/></mxGeometry></mxCell><mxCell id="34" value="&lt;font style=&quot;font-size: 16px&quot;&gt;xhr. withCredentials: GET /navigation.json... Cookie: portal_session&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=16;" parent="33" vertex="1" connectable="0"><mxGeometry x="0.1184" y="-3" relative="1" as="geometry"><mxPoint x="-63" y="-13" as="offset"/></mxGeometry></mxCell><mxCell id="36" value="&lt;div style=&quot;font-size: 13px&quot;&gt;Access-Control-Allow-Credentials: true&lt;/div&gt;&lt;div style=&quot;font-size: 13px&quot;&gt;Access-Control-Allow-Headers: Content-Type&lt;/div&gt;&lt;div style=&quot;font-size: 13px&quot;&gt;Access-Control-Allow-Methods: GET&lt;/div&gt;&lt;div style=&quot;font-size: 13px&quot;&gt;Access-Control-Allow-Origin: http://portal.p.test&lt;/div&gt;&lt;div style=&quot;font-size: 13px&quot;&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;" parent="1" vertex="1"><mxGeometry x="160" y="790" width="350" height="40" as="geometry"/></mxCell><mxCell id="42" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;oxfake.p.test&lt;/font&gt;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fontSize=16;align=center;verticalAlign=top;fontStyle=1" parent="1" vertex="1"><mxGeometry x="1229.75" y="120" width="100" height="710" as="geometry"/></mxCell><mxCell id="44" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;fontSize=13;" parent="1" source="2" target="42" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="550" y="470" as="sourcePoint"/><mxPoint x="600" y="420" as="targetPoint"/><Array as="points"><mxPoint x="840" y="190"/></Array></mxGeometry></mxCell><mxCell id="45" value="OIDC Login (not shown)" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=16;" parent="44" vertex="1" connectable="0"><mxGeometry x="-0.2679" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="54" value="&lt;font style=&quot;font-size: 19px&quot;&gt;navigation.json&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" parent="1" vertex="1"><mxGeometry x="210" y="720" width="60" height="30" as="geometry"/></mxCell><mxCell id="17" value="&lt;font style=&quot;font-size: 16px&quot;&gt;GET http://kc.p.test/auth/realms/CustomerA/protocol/openid-connect/auth&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1"><mxGeometry x="390" y="390" width="530" height="20" as="geometry"/></mxCell><mxCell id="55" value="&lt;font style=&quot;font-size: 20px&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;Only needed if no portal session&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;dashed=1;strokeWidth=4;align=left;verticalAlign=top;" vertex="1" parent="1"><mxGeometry x="20" y="210" width="1170" height="480" as="geometry"/></mxCell></root></mxGraphModel></diagram></mxfile>